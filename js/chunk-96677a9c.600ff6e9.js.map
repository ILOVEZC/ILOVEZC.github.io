{"version":3,"sources":["webpack:///./posts/vue的响应式.md","webpack:///./posts/images/image-20240202154947147.png"],"names":["extractVueFunctions","render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","_v","attrs","pre","vueFunctions","module","exports","attributes","vue","component","data","templateRender","createElement","created","$options"],"mappings":"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","file":"js/chunk-96677a9c.600ff6e9.js","sourcesContent":["function extractVueFunctions () {\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frontmatter-markdown\"},[_c('h1',[_vm._v(\"Vue 中的响应性是如何工作的\")]),_vm._v(\" \"),_c('p',[_vm._v(\"我们无法直接追踪对上述示例中局部变量的读写，原生 JavaScript 没有提供任何机制能做到这一点。\"),_c('strong',[_vm._v(\"但是\")]),_vm._v(\"，我们是可以追踪\"),_c('strong',[_vm._v(\"对象属性\")]),_vm._v(\"的读写的。\")]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"在 JavaScript 中有两种劫持 property 访问的方式：\"),_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get\",\"target\":\"_blank\"}},[_vm._v(\"getter\")]),_vm._v(\" / \"),_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set\",\"target\":\"_blank\"}},[_vm._v(\"setters\")]),_vm._v(\" 和 \"),_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\",\"target\":\"_blank\"}},[_vm._v(\"Proxies\")]),_vm._v(\"。Vue 2 使用 getter / setters 完全是出于支持旧版本浏览器的限制。而在 Vue 3 中则使用了 Proxy 来创建响应式对象，仅将 getter / setter 用于 ref。\")])]),_vm._v(\" \"),_c('h2',[_vm._v(\"了解 Render 函数\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"Render 函数与我们的 template 标签作用一样,template 是 Render 的进一步封装,并且 Render 里面可以填入自定义组件\")]),_vm._v(\" \"),_c('li',[_vm._v(\"本质上，template 先预编译成虚拟 dom 渲染函数\")])]),_vm._v(\" \"),_c('pre',[_c('code',{pre:true,attrs:{\"class\":\"hljs language-vue\"}},[_vm._v(\"<script>\\nexport default {\\n  props: {\\n    tag: String,\\n  },\\n  data() {\\n    return {\\n      people: ['哈默', '小夏', '小野'],\\n    }\\n  },\\n  render(createElement) {\\n    return createElement(\\n      this.tag,\\n      {},\\n      this.people.map((name) =>\\n        createElement(\\n          'li',\\n          {\\n            attrs: { class: 'test' },\\n            on: {\\n              click: () => {\\n                console.log('li clicked!')\\n              },\\n            },\\n          },\\n          `${name}`\\n        )\\n      )\\n    )\\n  },\\n}\\n</script>\\n\")])]),_vm._v(\" \"),_c('h2',[_vm._v(\"render 函数怎么用\")]),_vm._v(\" \"),_c('p',[_vm._v(\"常用场景:\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"动态标签(函数时声明的方式，根据不同的需求采用不同的标签)，对组件进行更细致的动态编辑\")])]),_vm._v(\" \"),_c('pre',[_c('code',{pre:true,attrs:{\"class\":\"hljs language-vue\"}},[_vm._v(\"<script lang=\\\"ts\\\">\\nimport { h } from 'vue'\\nexport default {\\n  props: {\\n    id: Number,\\n  },\\n  render() {\\n    return h(`h${this.id}`, 'hello world')\\n  },\\n}\\n</script>\\n\")])]),_vm._v(\" \"),_c('h2',[_vm._v(\"什么是虚拟 dom\")]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"通用性框架本质工作是将数据和页面渲染进行一一对应，而主流开发数据和渲染存在多对多关系（即一个数据可以用在多处，一处可以用多个数据），但是数据修改时进行一一对应是一件很难的事情。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"如果需要对界面全部重新生成，会消耗很多性能，所以改为全面生成虚拟 dom，通过新旧虚拟 dom 对比，来修改真实 dom\")]),_vm._v(\" \"),_c('li',[_vm._v(\"虚拟 dom 本质上是对象，抽象出来进一步作为 UI 界面，有利于把框架推广到桌面端，移动端等。\")])]),_vm._v(\" \"),_c('h2',[_vm._v(\"虚拟 dom 的对比方式 diff\")]),_vm._v(\" \"),_c('h3',[_vm._v(\"以 v-key 为例谈谈影响\")]),_vm._v(\" \"),_c('p',[_vm._v(\"如果没有 v-key,意味着 v-for 循环内的子元素无明显区别，都视作相同的 dom，那么循环内 dom 里面的内容都要被修改。加入 v-key 后就意味着 dom 之间有区别，会对 dom 的重新排序，而不是对真实 dom 进行修改。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"这种情况不仅仅出现在 for 循环内，如果两个需要 v-if 互相切换的 dom 之间没有区别，也会被视作一直占用同一个节点，v-if 切换后没有新生成 dom，而是重新给 dom 的一些属性复制然后复用\")]),_vm._v(\" \"),_c('h3',[_vm._v(\"diff 如何工作\")]),_vm._v(\" \"),_c('ul',[_c('li',[_c('p',[_vm._v(\"本质就是比较两个 JS 对象的差异\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"diff 的时机:当组件创建时，以及依赖的属性或数据变化时，会运行一个函数，该函数首先运行__render 生成一棵新的虚拟 dom 树(vnode tree)，然后运行__update，传入虚拟树的根节点，将两棵虚拟树进行对比，最终完成对真实 dom 的更新\")])])]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"./images/image-20240202154947147.png\"),\"alt\":\"image-20240202154947147\"}})]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"diff 的比对方法是双指针法\")])]),_vm._v(\" \"),_c('h2',[_vm._v(\"Vue2 的响应式原理\")]),_vm._v(\" \"),_c('p',[_vm._v(\"通过 \"),_c('strong',[_vm._v(\"object.defineProperty\")]),_vm._v(\" 遍历每一个属性并为其添加上 \"),_c('strong',[_vm._v(\"getter\")]),_vm._v(\" 和 \"),_c('strong',[_vm._v(\"setter\")]),_vm._v(\" 方法用来监听数据的读取与改变，然后结合 \"),_c('strong',[_vm._v(\"观察者模式\")]),_vm._v(\"，通知页面视图发生改变，从而实现数据的响应式原理。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Vue 是非侵入性的响应式系统，遍历对象并使用\"),_c('strong',[_vm._v(\"Object.defineProperty\")]),_vm._v(\"对对象的属性进行数据劫持，当数据发生变化时，触发数据劫持的\"),_c('strong',[_vm._v(\"setter\")]),_vm._v(\"函数，通知组件实例的\"),_c('strong',[_vm._v(\"watcher\")]),_vm._v(\"需要进行视图更新，以此来实现响应式。\")]),_vm._v(\" \"),_c('h2',[_vm._v(\"Vue3 的响应式原理\")]),_vm._v(\" \"),_c('h4',[_vm._v(\"什么是响应式\")]),_vm._v(\" \"),_c('p',[_vm._v(\"当数据改变时，引用数据的函数会自动重新执行。\")]),_vm._v(\" \"),_c('h4',[_vm._v(\"什么是副作用函数\")]),_vm._v(\" \"),_c('p',[_vm._v(\"如果一个函数引用了外部的资源，这个函数会受到外部资源改变的影响，那么我们就说这个函数存在副作用。\")]),_vm._v(\" \"),_c('h4',[_vm._v(\"自定义设置响应过程\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Proxy 感知数据改变，拦截赋值操作，再赋值后把副作用函数执行一次\")])])}]\n\nreturn { render: render, staticRenderFns: staticRenderFns }\n}\nconst vueFunctions = extractVueFunctions()\n\nmodule.exports = { \n      attributes: {},\n    \n      vue: {\n        component: {\n          data: function () {\n            return {\n              templateRender: null\n            }\n          },\n          render: function (createElement) {\n            return this.templateRender ? this.templateRender() : createElement(\"div\", \"Rendering\");\n          },\n          created: function () {\n            this.templateRender = vueFunctions.render;\n            this.$options.staticRenderFns = vueFunctions.staticRenderFns;\n          }\n        }\n      },\n     }","module.exports = __webpack_public_path__ + \"img/image-20240202154947147.6c38103f.png\";"],"sourceRoot":""}